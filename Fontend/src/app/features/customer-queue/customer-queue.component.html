<div class="space-y-6">
  <!-- Header -->
  <header class="flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center">
    <div>
      <h1 class="text-2xl font-medium text-gray-900">คิวพนักงาน</h1>
    </div>
  </header>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
    @for(card of summaryData(); track card.title) {
      <app-summary-card
        [title]="card.title"
        [value]="card.value"
        [unit]="card.unit"
        [icon]="card.icon"
        [valueClass]="card.valueClass"
        [iconBgClass]="card.iconBgClass"
        [iconClass]="card.iconClass">
      </app-summary-card>
    }
  </div>

  <div class="grid grid-cols-1 xl:grid-cols-5 gap-8">
    <!-- Left Column: Ready Queue -->
    <div class="xl:col-span-3">
      <header class="flex items-center gap-3 mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962A3.75 3.75 0 0115 9.75c0 1.036-.396 2.004-1.074 2.75m-7.5-2.962c.312-.25.64-.465.993-.642m-3.042 3.042a9.094 9.094 0 00-3.741-.479 3 3 0 004.682-2.72M6.75 9.75c0 1.036.396 2.004 1.074 2.75m9-2.75a2.25 2.25 0 012.25 2.25c0 1.242-.99 2.25-2.25 2.25m-11.25-2.25a2.25 2.25 0 012.25 2.25c0 1.242-.99 2.25-2.25 2.25m8.25-11.25a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
        </svg>
        <h2 class="text-xl font-medium">ลำดับรอรับลูกค้า (Ready Queue)</h2>
        <span class="text-base text-gray-500 ml-auto">{{readyQueue().length}} staff available</span>
      </header>

      <div class="space-y-3">
        @for(staff of readyQueue(); track staff.queue) {
          @if (staff.isNext) {
            <div class="bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl p-4 text-white relative shadow-lg overflow-hidden transition-all hover:shadow-xl hover:-translate-y-1">
              <div class="absolute -top-10 -right-10 w-48 h-48 bg-white/5 rounded-full opacity-50"></div>
              <div class="absolute -bottom-12 -left-8 w-36 h-36 bg-white/5 rounded-full opacity-50"></div>
              <div class="relative z-10">
                <div class="flex justify-between items-center mb-3">
                  <span class="bg-white/90 text-indigo-700 text-sm font-medium px-4 py-1.5 rounded-full shadow-md">
                    NEXT
                  </span>
                  <div class="relative">
                    <app-avatar [src]="staff.avatar" [name]="staff.name" size="lg" className="w-16 h-16 border-4 border-white/50 shadow-md"></app-avatar>
                    <span class="absolute -top-1 -left-1 flex items-center justify-center w-8 h-8 bg-yellow-400 text-yellow-900 font-medium text-base rounded-full border-2 border-white">
                      {{ staff.queue }}
                    </span>
                  </div>
                </div>
                <p class="text-base font-light text-indigo-200">คิวถัดไป</p>
                <h3 class="text-3xl font-bold tracking-tight">{{ staff.name }}</h3>
                <div class="flex items-center gap-2 mt-2 text-indigo-200">
                  <app-icon name="user" className="h-5 w-5"></app-icon>
                  <span class="font-medium">{{ staff.status }}: {{ staff.servedToday }}</span>
                </div>
              </div>
            </div>
          } @else {
            <div class="bg-white rounded-xl p-3 flex items-center gap-4 shadow-sm transition-all hover:shadow-md">
              <div class="flex-shrink-0 w-16 text-center bg-gray-100/80 rounded-lg py-1">
                <p class="text-xs text-gray-500">QUEUE</p>
                <p class="text-2xl font-medium text-gray-700">{{ staff.queue }}</p>
              </div>
              <app-avatar [src]="staff.avatar" [name]="staff.name" size="md"></app-avatar>
              <div class="flex-grow">
                <p class="font-medium text-gray-800">{{ staff.name }}</p>
                <p class="text-sm text-gray-500">{{ staff.status }}</p>
              </div>
              <div class="flex-shrink-0 text-right">
                <p class="text-xs text-gray-400">Today</p>
                <p class="text-xl font-medium text-gray-800">{{ staff.servedToday }}</p>
              </div>
            </div>
          }
        }
      </div>
    </div>

    <!-- Right Column Wrapper -->
    <div class="xl:col-span-2 space-y-8">
      <!-- Busy Column -->
      <div>
        <header class="flex items-center gap-2.5 mb-4">
          <span class="w-3 h-3 bg-red-400 rounded-full animate-pulse"></span>
          <h2 class="text-xl font-medium">กำลังดูแลลูกค้า (Busy)</h2>
          <span class="ml-auto px-2.5 py-1 text-base font-medium text-red-700 bg-red-100 rounded-full">
            {{busyStaff().length}}
          </span>
        </header>
        <div class="space-y-3">
          @for(staff of busyStaff(); track staff.name) {
            <div class="bg-white rounded-xl p-3.5 border-l-4 border-red-500 shadow-sm transition-all hover:shadow-md hover:border-red-600">
              <div class="flex items-center gap-4">
                <app-avatar [src]="staff.avatar" [name]="staff.name" size="md"></app-avatar>
                <div class="flex-grow">
                  <p class="font-medium text-gray-800">{{ staff.name }}</p>
                  <p class="text-sm text-gray-500">Job ID: {{ staff.jobId }}</p>
                </div>
                <div class="text-right">
                  <p class="text-2xl font-mono font-medium tracking-tighter text-gray-800">{{ staff.duration }}</p>
                  <p class="text-xs text-gray-400">DURATION</p>
                </div>
              </div>
            </div>
          }
        </div>
      </div>

      <!-- Unavailable Column -->
      <div>
        <header class="flex items-center gap-2.5 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.038-.502.068-.75.097C7.382 3.328 6 4.39 6 5.75v.5a.75.75 0 00.75.75H9M9.75 3.104C11.233 2.586 13.06 2 15 2c2.67 0 5 1.8 5 4s-2.33 4-5 4c-1.94 0-3.767-.586-5.25-1.591M15 10c3.333 0 5-1.5 5-3.5s-1.667-3.5-5-3.5c-3.333 0-5 1.5-5 3.5 0 .86.233 1.667.659 2.409L15 10z" />
          </svg>
          <h2 class="text-xl font-medium">พัก / ไม่ว่าง (Unavailable)</h2>
          <span class="ml-auto px-2.5 py-1 text-base font-medium text-gray-700 bg-gray-200 rounded-full">
            {{unavailableStaff().length}}
          </span>
        </header>
        <div class="bg-gray-100 rounded-xl p-3 space-y-2">
          @for(staff of unavailableStaff(); track staff.name) {
            <div class="bg-white rounded-lg p-2.5 flex items-center gap-3">
              <app-avatar 
                [src]="staff.avatar" 
                [name]="staff.name" 
                size="md"
                [className]="staff.isAvatarLetter ? '' : ''">
              </app-avatar>
              <div>
                <p class="font-medium text-gray-800">{{ staff.name }}</p>
                <p class="text-sm text-gray-500">{{ staff.status }}</p>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>

