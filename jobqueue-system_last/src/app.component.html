<div class="relative min-h-screen bg-slate-50 text-gray-800">
  <!-- Sidebar -->
  <div class="fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ease-in-out"
       [class]="isSidebarOpen() ? 'translate-x-0' : '-translate-x-full'">
    <app-sidebar 
      [availabilityStatus]="availabilityStatus()"
      (navClicked)="onNavigate($event)"
      (statusChanged)="onStatusChange($event)">
    </app-sidebar>
  </div>

  <!-- Backdrop for mobile -->
  @if (isSidebarOpen()) {
    <div (click)="isSidebarOpen.set(false)" class="fixed inset-0 z-20 bg-black/60 lg:hidden"></div>
  }

  <main class="flex-1 flex flex-col overflow-y-auto transition-all duration-300" [class.lg:ml-64]="isSidebarOpen()">
    @if (activeView() === 'my-tasks') {
      <app-my-tasks 
        [availabilityStatus]="availabilityStatus()"
        [statusBannerInfo]="statusBannerInfo()"
        (menuClick)="toggleSidebar()"
        (statusChangeRequest)="onStatusChange($event)">
      </app-my-tasks>
    }
    @if (activeView() === 'customer-queue') {
      <app-customer-queue 
        [statusBannerInfo]="statusBannerInfo()"
        (menuClick)="toggleSidebar()">
      </app-customer-queue>
    }
    @if (activeView() === 'assign') {
      <app-job-assignment 
        [statusBannerInfo]="statusBannerInfo()"
        (menuClick)="toggleSidebar()">
      </app-job-assignment>
    }
    @if (activeView() === 'report') {
      <app-sales-report 
        [statusBannerInfo]="statusBannerInfo()"
        (menuClick)="toggleSidebar()">
      </app-sales-report>
    }
  </main>
</div>